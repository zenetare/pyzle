{% load static %}
<! DOCTYPE html>
<html>
<head>
    <title>{{ title }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static '/css/style.css' %}">
          <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mediaelement/4.2.6/mediaelementplayer.css">

</head>
<body>
    <div class="content_all">
        <div class="container">

            <div class="row-content" style="margin-top: 50px">
                <div class="row top-row" style="margin-bottom: 30px">
                    <div class="col-12 col-sm-12">
                        <input type="text" name="start-tran" class="start-tran" />
                        <input type="text" name="stop-tran" class="stop-tran" />
                              <button class="add-tran btn-ca">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="add-start btn-ca">
                                start
                            </button>
                            <button class="add-end btn-ca">
                                end
                            </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-12">
                        <div class="content-vid-url">
   <div class="media-wrapper">
            <video id="player1" width="100%" height="100%" controls preload="none">
                <source src="https://r2---sn-5hne6nsk.googlevideo.com/videoplayback?expire=1607550050&ei=AvDQX_6dE461gQfSor_ICw&ip=185.239.138.24&id=o-AAwtqT7CHwmXWTjCooBdk00KyUAh22aEay-iVvlm29W0&itag=22&source=youtube&requiressl=yes&vprv=1&mime=video/mp4&ns=IrdpPNh8ZgMGCbch65BaATcF&ratebypass=yes&dur=429.754&lmt=1606994522131290&fvip=2&c=WEB&txp=6211222&n=Igh789Crn6esOg_X&sparams=expire,ei,ip,id,itag,source,requiressl,vprv,mime,ns,ratebypass,dur,lmt&sig=AOq0QJ8wRgIhAMeKKInQ8R9nn2cUlKNrg68sLRMqaKbM3A6juP7zxfIkAiEAt9ouAzwkkjRMC0e3IvpFuXQh19oAXA3rRHoAFErQ_Xw=&avi=K1A%2FHwERIiwAVF9GZF9ZfQcVXB0UOhRHSFQmDVNZV0E1FigaFRwsBwECFkYZahBEYRcbAhwBJAoUFxYARVZaWTseEw4GAi8LCQdXVxcEBARoUEVUB0R7UFBFV1VOXwpFMwoTGg4eJQICEhYFU15bRikGG1Q4WG8mDQYNAVFlW141AR0XCARvX0YtOUYSBwIEZUJQRFVBEUdIKkdVFQEEC2JAW0ZQKG84GEdTVBQEAAtkR1lUSVYdCQUPBAZKXVtHKSEdFxEBPkdeVCovAR0QZTkWDBksGisKMQQJLU1VV0tySFlaRy0ZBgsDCxBRSBAJcic6VElWHRcLDhxGGRNaRyQCU1lKRXVQSkRWXQ0AAQt%2BQF1MXUR9VUtUSUZuUEp%2BORwNNQoBIxEWD0deAXxzEXxQKgMXBigLECIMCUZCRlI9AktMR0V7VVNDV1wXBAIRfFAsDhEGLAYQGRcwWkFXEWpQAwUKGgQLNBcCAQFM&from_cache=True&rm=sn-pouxga5o-vu2l7l,sn-4g5els7l&req_id=8d3d304ed92a3ee&ipbypass=yes&redirect_counter=3&cm2rm=sn-aigezz7l&cms_redirect=yes&mh=3T&mip=41.141.56.234&mm=34&mn=sn-5hne6nsk&ms=ltu&mt=1607528435&mv=m&mvi=2&pl=21&lsparams=ipbypass,mh,mip,mm,mn,ms,mv,mvi,pl&lsig=AG3C_xAwRgIhAN9UwFednjF6OiiZ058F77G3w8cm5YwA6enhpbMu8SlbAiEA3wIrg0tNuR_A05DEZWsAEIoOH3KZ3A9dpUuwUSkNT1k%3D" >
            </video>
        </div>                        </div>
                        <div class="icon-vid" style="margin-top: 20px">
                            <button class="btn-play">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="hidden-char">
                                <i class="fas fa-angle-down"></i>
                            </button>
                            <button class="hidden-up">
                                <i class="fas fa-angle-up"></i>
                            </button>


                        </div>
                    </div>
                    <div class="col-12 col-md-5">
                        <div class="content-tran">
                            <div class="post-teran col-12 col-sm-12" style="margin-bottom: -19px">
                                <div class="body-tran">
                                      <div class="col-12 col-md-12" style="margin-bottom: 10px">
                                        <textarea></textarea>
                                    </div>
                                    <div class="col-5 col-sm-6" style="float: right">
                                        <input type="text">
                                    </div>
                                    <div class="col-5 col-sm-6">
                                        <input type="text">
                                    </div>
                                    <div style="clear: both"></div>
                                </div>
                            </div>
                            <div class="post-teran col-12 col-sm-12" style="margin-bottom: -19px">
                                <div class="body-tran">
                                      <div class="col-12 col-md-12" style="margin-bottom: 10px">
                                        <textarea></textarea>
                                    </div>
                                    <div class="col-5 col-sm-6" style="float: right">
                                        <input type="text">
                                    </div>
                                    <div class="col-5 col-sm-6">
                                        <input type="text">
                                    </div>
                                    <div style="clear: both"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<div class="allaow" style="z-index: 1000;width: 200px;height: 300px; position: absolute; top: 20px; right: 50px; border: 3px solid #fff">
    <span class="move-h se" style="position: absolute; top: 0; right: 0; width: 10px; height: 10px; background: black"></span>
    <span class="move-h" style="position: absolute; top: 0; left: 0; width: 10px; height: 10px; background: black"></span>
    <span class="move-h" style="position: absolute; bottom: 0; right: 0; width: 10px; height: 10px; background: black"></span>
    <span class="move-h" style="position: absolute; bottom: 0; left:  0; width: 10px; height: 10px; background: black"></span>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="{% static '/js/script.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mediaelement/4.2.6/mediaelement-and-player.min.js"></script>
<script>



        let el = document.querySelector('.allaow');

        el.addEventListener('mousedown', mousedown);

        function mousedown(e) {
            window.addEventListener('mousemove', mousemove);
            window.addEventListener('mouseup', mouseup);

            let prevX = e.clientX;
            let prevY = e.clientY;
            console.log(prevX)
            function mousemove(e) {
                 let newX = prevX - e.clientX;
                 let newY = prevY - e.clientY;

                 const rect = el.getBoundingClientRect();
                 el.style.left = rect.left - newX + "px";
                 el.style.top = rect.top - newY + "px";

                 prevX = e.clientX;
                 prevY = e.clientY;
            }
            function mouseup() {

                window.removeEventListener('mousemove', mousemove);
                window.removeEventListener('mouseup', mouseup);

            }
        }

        const resizers = document.querySelectorAll(".move-h");

        for(let resizer of resizers) {
            resizer.addEventListener('mousedown', mousedown)
            function mousedown(e) {
                currentResizer = e.target;

                let prevX = e.clientX;
                let prevY = e.clientY;

                window.addEventListener('mousemove', mousemove);
                window.addEventListener('mouseup', mouseup);


                function mousemove(e) {

                    const rect = el.getBoundingClientRect();
                    if(currentResizer.classList.contains('se')) {
                        el.style.width = rect.width - (prevX - e.clientX) + "px";
                        el.style.height = rect.height - (prevY - e.clientY) + "px";
                    }
                    prevX = e.clientX;
                    prevY = e.clientY;

                }
                function mouseup() {

                          window.removeEventListener('mousemove', mousemove);
                          window.removeEventListener('mouseup', mouseup);


                }

            }
        }





</script>
<script>

    $(document).ready(function () {


        $('.add-tran').click(function () {

            var p = $(".allaow").last();
            var offset = p.offset();
            let topTR = offset.top + 104;
            let leftTR = offset.left;
            let widthTR = document.querySelector('.allaow').clientWidth + leftTR;
            let heightTR = document.querySelector('.allaow').clientHeight + 10 + topTR ;

            $.ajax({

                url: "{% url 'ajax' %}",
                method: 'GET',
                data : { topTR:topTR, leftTR:leftTR, widthTR:widthTR, heightTR:heightTR },
                success: function (response) {

                    let  htmlTan = "";
                      htmlTan += '<div class="post-teran col-12 col-sm-12" style="margin-bottom: -19px">';
                        htmlTan += '<div class="body-tran">';
                              htmlTan += '<div class="col-12 col-md-12" style="margin-bottom: 10px">';
                                htmlTan += '<textarea>';
                                    htmlTan += response.ti;
                                htmlTan += '</textarea>';
                              htmlTan += '</div>';
                            htmlTan += '<div class="col-5 col-sm-6" style="float: right">';
                                htmlTan += '<input type="text">';
                            htmlTan += '</div>';
                            htmlTan += '<div class="col-5 col-sm-6">';
                                htmlTan += '<input type="text">';
                            htmlTan += '</div>';
                            htmlTan += '<div style="clear: both"></div>';
                        htmlTan += '</div>';
                    htmlTan += '</div>';

                    $(".content-tran").prepend(htmlTan);

                }
            });


        })


    });

</script>
<script>
$(document).ready(function() {

  $('.hidden-char').click(function () {

    $('.mejs__controls').hide();

  });
  $('.hidden-up').click(function () {

    $('.mejs__controls').show();

  });
  $('.btn-play').click(function () {
      $('.mejs__button.mejs__playpause-button').click()
  })

});


</script>
</body>
</html>